---
title: WiMAXを使用していて、ホスト名解決できない問題にハマってる人に捧ぐ
date: 2014-05-11
---

僕は最近WiMAXルーター「AtermWM3800R」を購入しまして、おかげ様で家でも外でもインターネットを楽しむことができているのですが、ひとつだけ悩みがあります。

###WiMAXで陥った問題
その悩みとは

**頻繁にホスト名解決ができなくなる**

というものです。

どこかのページにアクセスして一度でもホスト名解決がうまくいかないと、その後どのページにアクセスしてもホスト名が解決できなくなります。

そしてその対処策として、WiMAXルーターのリセットボタンを押して初期化すれば一応直ります。

でも頻繁（2〜3日に一回ぐらい）に問題が起こるので何度も何度も初期化しなければならず、時間もかかるし精神衛生上も良くありません。

プロバイダに問い合わせていろいろ設定とか確認しても、接続もうまくいってるからまったく問題ないとのこと。「壊れてるかわからないけど修理するとしたら1週間ほどかかるよー代替機はないよー」と。がっでむ。

###そもそもホスト名解決とは
ホスト名解決とは、こちらがリクエストしたホスト名に対応するIPアドレスを取得すること。ネットワーク上のコンピュータに割り当てられてるIPアドレスは人間にとって覚えにくいから覚えやすいホスト名をつけておいて、そいつらを対応させるんですね。それはDNSサーバーの仕事のはずです。今回そこで何か問題が起きているんだと思われます。

###ルータの管理画面みてみる
自分が使ってるAtermWM3800Rではルーターの管理画面は`192.168.0.1`でアクセスできます。

そこで情報＞現在の状態からDNSの情報をみることができます。プライマリDNS、セカンダリDNSとなんか割り振られてるのがわかるかとおもいます。こいつらが問題を起こしてるのかなーと仮説をたてます。

###Googleのpublic DNS使ってみる
なんか他のDNSサーバー使えないのかなーといろいろ探していたところ、[こちらの記事](http://benny.txt-nifty.com/blog/2013/02/wimaxdns-93ab.html)を発見しました。これは症状かなり似てるぞと思って早速試してみました。

Mac前提で申し訳ないですが、システム環境設定＞ネットワーク＞Wifiで接続するネットワーク名を選んで、詳細ボタン＞DNSとたどっていき、そこに`8.8.8.8`と`8.8.4.4`を指定してみます。

![network_setting](images/2014/05/11/network_setting.png)

でためしにfacebookでもみてみます。

    $ nslookup www.facebook.com

    Server:   8.8.8.8
    Address:  8.8.8.8#53

    Non-authoritative answer:
    www.facebook.com
    canonical name = star.c10r.facebook.com.
    Name: star.c10r.facebook.com
    Address: 31.13.70.65

こんな感じで返ってきました。DNSサーバーもちゃんと`8.8.8.8`が使われてます。うまくいってるぽいですね。

そしてこの設定をして1ヶ月ほど経つのですが、まだ一度もホスト名が解決できない問題に遭遇していないので効果があったのかなーと思われます。

###まとめ
「WiMAX DNSエラー」とかで検索したらわりと情報は出てきたので結構みんな困ってた問題なんだなーとおもいました。でもIT業界じゃないような人は「DNSエラー」とかでなかなか検索しないだろうから今回敢えて「ホスト名解決できない問題」ってタイトルにしてみました。

あとこれはパフォーマンスの話ですが[こちらの記事](http://www.koikikukan.com/archives/2011/09/17-035555.php)にあるように`8.8.8.8`より`129.250.35.250`のほうが速いらしいです。そっちで試してみるのも有りだと思います。

###参考
- [WiMAXのDNSエラー対策（暫定）](http://benny.txt-nifty.com/blog/2013/02/wimaxdns-93ab.html)

- [「8.8.8.8,8.8.4.4」より速い「129.250.35.250」](http://www.koikikukan.com/archives/2011/09/17-035555.php)
